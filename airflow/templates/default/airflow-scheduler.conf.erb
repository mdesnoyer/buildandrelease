description "Airflow Scheduler"

start on filesystem or runlevel [2345]
stop on runlevel [!2345]

respawn
respawn limit 10 5
umask 022

setuid <%= @user %>
setgid <%= @group %>

env AIRFLOW_HOME=<%= @airflow_home %>
export AIRFLOW_HOME

# required setting, 0 sets it to unlimited. Scheduler will restart after every X runs
env SCHEDULER_RUNS=5
export SCHEDULER_RUNS

console log

exec /usr/local/bin/airflow scheduler -n ${SCHEDULER_RUNS}

