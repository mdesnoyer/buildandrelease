description "A flume agent"
author  "Mark Desnoyer <desnoyer@neon-lab.com>"

start on runlevel [234]
stop on runlevel [0156]

kill timeout 600
limit nofile 65536 65536

pre-start script
    [ -d /var/run/flume-ng/flume-ng-agent ] || mkdir -p /var/run/flume-ng/flume-ng-agent 
end script

exec cd <%= @flume_run_dir %> && sudo -u <%= @flume_user %> <%= @flume_bin %> agent --conf <%= @flume_conf_dir %> --conf-file <%= @flume_conf_dir %>/flume.conf --name agent
respawn
